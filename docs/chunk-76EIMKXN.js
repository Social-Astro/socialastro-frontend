import{a as $}from"./chunk-MW6O246A.js";import{a as L,b as H}from"./chunk-6KH5BT37.js";import{b as q}from"./chunk-4STJHMTN.js";import{a as X}from"./chunk-C3UKUFRZ.js";import{a as ce}from"./chunk-5677HV7J.js";import"./chunk-UZKQSB4C.js";import"./chunk-QDXQE2EN.js";import"./chunk-6R4RIIF6.js";import"./chunk-GFFBMY3N.js";import"./chunk-7TJXTN3F.js";import{b as J,c as D,e as K,f as Q,k as W,m as Y,o as Z,p as ee,q as te,r as ne,t as ie,v as oe}from"./chunk-EDEUMYWG.js";import{a as h}from"./chunk-3TMGCKTS.js";import{a as w}from"./chunk-43T3IAZR.js";import{g as G,j as B}from"./chunk-FWI7O2YG.js";import{j}from"./chunk-GT6PACLV.js";import{Aa as s,Hb as v,Ib as R,Jb as A,Ka as O,Pa as C,S as u,Wa as d,Z as p,_ as m,_b as E,ab as g,cb as V,da as M,db as k,eb as c,fb as o,gb as _,ja as S,ka as P,kb as x,ma as b,nb as f,ob as a,rb as I,wb as z,xb as l,yb as F,zb as T}from"./chunk-W4ZOI5UP.js";import"./chunk-7CGTOI24.js";var de=()=>({row:"!partial"}),N=()=>({valid:"is-valid",invalid:"is-invalid"}),pe=(t,n)=>({"col-12":t,"col-6":n}),me=(t,n)=>n.id;function _e(t,n){if(t&1&&(c(0,"option",13),l(1),o()),t&2){let e=n.$implicit;I("value",e.id),s(),F(e.title)}}function fe(t,n){if(t&1&&(c(0,"div",2)(1,"label",11),l(2,"Tema"),o(),c(3,"select",12),V(4,_e,2,2,"option",13,me),o()()),t&2){let e=a(2);s(4),k(e.allTopics)}}function ue(t,n){if(t&1){let e=x();c(0,"div",2)(1,"label",3),l(2,"Nombre"),o(),_(3,"input",4),o(),C(4,fe,6,0,"div",2),c(5,"div",5)(6,"label",6),l(7,"Descripci\xF3n"),o(),_(8,"input",7),o(),c(9,"div",8)(10,"button",9),l(11," Guardar "),o(),c(12,"button",10),f("click",function(){p(e);let r=a();return m(r.hideForm())}),l(13," Abortar misi\xF3n "),o()()}if(t&2){let e=a();s(3),d("validationClasses",v(5,N)),s(),g(e.showSelect()?4:-1),s(),d("ngClass",A(6,pe,e.showSelect(),!e.showSelect())),s(3),d("validationClasses",v(9,N)),s(2),d("disabled",e.sectionForm.invalid)}}function ge(t,n){if(t&1){let e=x();c(0,"form",14),f("ngSubmit",function(){p(e);let r=a();return m(r.sendSection())}),_(1,"input",15)(2,"input",16),c(3,"div",17)(4,"button",18),_(5,"i",19),o(),c(6,"button",20),f("click",function(){p(e);let r=a();return m(r.hideForm())}),_(7,"i",21),o()()()}if(t&2){let e=a();d("formGroup",e.sectionForm),s(),d("validationClasses",v(4,N)),s(),d("validationClasses",v(5,N)),s(2),d("disabled",e.sectionForm.invalid)}}var y=class t{#e=u(w);#t=u(X);#n=u(M);#i=u(ie);topic=P();allTopics=[];section=P();showSelect=b(!1);saved=S();hide=S();partial=!1;sectionForm=this.#i.group({title:["",[D.required]],description:["",[D.required]],topic:[""]});constructor(){E(()=>{this.topic()||(this.#t.getTopics().pipe(h(this.#n)).subscribe(n=>this.allTopics=n),this.showSelect.set(!0)),this.section()&&(this.sectionForm.get("title").setValue(this.section().title),this.sectionForm.get("description").setValue(this.section().description),this.partial=!0)})}async sendSection(){let n=this.topic()?this.topic():this.allTopics.find(i=>i.id===+this.sectionForm.get("topic").getRawValue());console.log(n);let e={title:this.sectionForm.get("title").getRawValue(),description:this.sectionForm.get("description").getRawValue(),image:"",topic:n};this.partial?this.#e.editSection(e,this.section().id).pipe(h(this.#n)).subscribe({next:()=>{this.saved.emit()},error:i=>console.log(i.error.message)}):this.#e.addSection(e).pipe(h(this.#n)).subscribe({next:()=>{this.saved.emit()},error:i=>console.log(i.error.message)})}hideForm(){this.hide.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=O({type:t,selectors:[["sections-form"]],inputs:{topic:[1,"topic"],section:[1,"section"]},outputs:{saved:"saved",hide:"hide"},decls:3,vars:4,consts:[[3,"ngSubmit","formGroup","ngClass"],[1,"mt-4","d-flex",3,"formGroup"],[1,"col-6"],["for","title",1,"form-label"],["type","text","name","title","formControlName","title",1,"form-control","input",3,"validationClasses"],[3,"ngClass"],["for","desc",1,"form-label"],["type","text","name","desc","formControlName","description",1,"form-control","input",3,"validationClasses"],[1,"col-12","d-flex","justify-content-center"],["type","submit",1,"btn","btn-outlined-primary","m-2",3,"disabled"],["type","button",1,"btn","btn-outlined-danger","m-2",3,"click"],["for","topic",1,"form-label"],["name","topic","formControlName","topic",1,"form-control","input"],[3,"value"],[1,"mt-4","d-flex",3,"ngSubmit","formGroup"],["type","text","name","title","formControlName","title",1,"form-control","input","titulo",3,"validationClasses"],["type","text","name","description","formControlName","description",1,"form-control","input","desc",3,"validationClasses"],[1,"d-flex","otros"],["type","submit",1,"btn","m-1",3,"disabled"],[1,"bi","bi-floppy"],["type","button",1,"btn","m-1",3,"click"],[1,"bi","bi-x"]],template:function(e,i){e&1&&(c(0,"form",0),f("ngSubmit",function(){return i.sendSection()}),C(1,ue,14,10)(2,ge,8,6,"form",1),o()),e&2&&(d("formGroup",i.sectionForm)("ngClass",v(3,de)),s(),g(i.partial?2:1))},dependencies:[oe,W,te,ne,J,ee,K,Q,Y,Z,ce,j],styles:[".input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#0d0032cc,#000c);color:#d6a3d6}"]})};var Ce=t=>["/home/sections",t];function xe(t,n){if(t&1&&(c(0,"div")(1,"p",4),l(2),o(),_(3,"img",5),o(),c(4,"div",6)(5,"a",7),l(6),o(),c(7,"p",8),l(8),o()()),t&2){let e=a();s(2),F(e.section().topic.title),s(3),d("routerLink",R(4,Ce,e.section().id)),s(),T(" ",e.section().title," "),s(2),F(e.section().description)}}function he(t,n){if(t&1){let e=x();c(0,"sections-form",9),f("saved",function(){p(e);let r=a();return m(r.showEditForm())})("hide",function(){p(e);let r=a();return m(r.showEditForm())}),o()}if(t&2){let e=a();d("topic",e.section().topic)("section",e.section())}}function Pe(t,n){if(t&1){let e=x();c(0,"div",3)(1,"p-button",10),f("click",function(r){p(e);let le=z(3);return m(le.toggle(r))}),o(),c(2,"p-popover",null,0)(4,"div",11)(5,"button",12),f("click",function(){p(e);let r=a();return m(r.showEditForm())}),_(6,"i",13),o(),c(7,"button",12),f("click",function(){p(e);let r=a();return m(r.deleteSection())}),_(8,"i",14),o()()()()}t&2&&(s(),d("rounded",!0))}var U=class t{#e=u(w);#t=u(M);section=P.required();actualUser=P.required();topicTitle="";edit=b(!1);deleted=S();edited=S();showEditForm(){this.edited.emit(),this.edit.update(n=>!n)}deleteSection(){this.#e.deleteSection(this.section().id).pipe(h(this.#t)).subscribe({next:()=>{this.deleted.emit()},error:n=>console.log(n.error.message)})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=O({type:t,selectors:[["sections-card"]],inputs:{section:[1,"section"],actualUser:[1,"actualUser"]},outputs:{deleted:"deleted",edited:"edited"},decls:4,vars:2,consts:[["op",""],[1,"secciones"],[3,"topic","section"],[1,"action"],[1,"tema","mb-0"],["src","assets/normal/normal_system_section.png","alt","Icono sections",1,"image",2,"width","40px"],[1,"data","mt-2"],[3,"routerLink"],[1,"desc"],[3,"saved","hide","topic","section"],["icon","pi pi-cog","size","small","severity","help",3,"click","rounded"],[1,"flex","gap-6"],[1,"btn","btn-sm","m-1",3,"click"],[1,"bi","bi-pencil"],[1,"bi","bi-trash-fill"]],template:function(e,i){e&1&&(c(0,"div",1),C(1,xe,9,6)(2,he,1,2,"sections-form",2)(3,Pe,9,1,"div",3),o()),e&2&&(s(),g(i.edit()?2:1),s(2),g(i.actualUser()&&i.actualUser().role==="ADMIN"&&!i.edit()?3:-1))},dependencies:[$,H,L,B,y],styles:['.fondo-card[_ngcontent-%COMP%]{border-radius:20px;padding:1.5rem;margin-bottom:1rem;opacity:.9;box-shadow:0 0 40px #00000080;border:2px solid rgba(13,0,50,.5);background:linear-gradient(to bottom,#0d0032cc,#000c);color:#fff}@media (min-width: 1500px){.principal[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr)}.principal[_ngcontent-%COMP%]   .home[_ngcontent-%COMP%]{grid-column:1/3}}@media (max-width: 1500px){.principal[_ngcontent-%COMP%]{display:flex;flex-direction:column}}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}@media (max-width: 1500px) and (min-width: 1300px){.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;text-align:left}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]{position:relative}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#c7b6c5;text-decoration:none}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background:linear-gradient(to left,#1c1635,#ab9ce0);bottom:0;left:0;transform:scaleX(0);transform-origin:left;transition:transform .4s ease-out}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]:hover:after{transform:scaleX(1)}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]   .post-aside[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-left:.2rem}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:.9;filter:blur(10px);box-shadow:0 0 5em #edeed499,0 0 10em #ccccc34d}50%{opacity:1;filter:blur(12px);box-shadow:0 0 6em #feffd4cc,0 0 12em #eaebdd80}}.fondo-card.sections[_ngcontent-%COMP%]{display:flex;flex-direction:column}.fondo-card.sections[_ngcontent-%COMP%]   .sections-card[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.5rem}@media (min-width: 1600px){.fondo-card.sections[_ngcontent-%COMP%]   .sun[_ngcontent-%COMP%]{position:absolute;width:25rem;height:25rem;bottom:0;right:0;z-index:1;pointer-events:none}.fondo-card.sections[_ngcontent-%COMP%]   .sun[_ngcontent-%COMP%]   .sunback[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;border-radius:50%;background:radial-gradient(circle,#fffff1e6 40%,#a6a7a166,#fdff8500);box-shadow:0 0 5em #fdff8599,0 0 10em #fdff854d;z-index:-1;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.fondo-card.sections[_ngcontent-%COMP%]   .sun[_ngcontent-%COMP%]   .suncontent[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;height:100%;color:#423977;text-align:center}.fondo-card.sections[_ngcontent-%COMP%]   .titulo-section[_ngcontent-%COMP%]{display:none}}@media (max-width: 1600px){.fondo-card.sections[_ngcontent-%COMP%]   .suncontent[_ngcontent-%COMP%]{display:none}}.secciones[_ngcontent-%COMP%]{display:flex;background:linear-gradient(to bottom,#0d0032cc,#000c);border-radius:15px;width:fit-content;padding:1.5rem;gap:1.5rem;align-items:center}.secciones[_ngcontent-%COMP%]   .tema[_ngcontent-%COMP%]{font-size:smaller}.secciones[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:violet;font-weight:bolder}.secciones[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{font-size:small;text-overflow:ellipsis}.secciones[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{align-self:end}']})};var be=(t,n)=>n.id;function Me(t,n){if(t&1){let e=x();c(0,"div",12)(1,"sections-form",14),f("saved",function(){p(e);let r=a(2);return m(r.showSectionForm())})("hide",function(){p(e);let r=a(2);return m(r.showSectionForm())}),o()()}if(t&2){let e=a(2);s(),d("topic",e.topic())}}function Se(t,n){if(t&1){let e=x();c(0,"button",15),f("click",function(){p(e);let r=a(2);return m(r.showSectionForm())}),_(1,"img",16),l(2," Agregar sistema "),o()}}function Oe(t,n){if(t&1&&(c(0,"div",0)(1,"h2",11),l(2,"Panel de mando"),o(),C(3,Me,2,1,"div",12)(4,Se,3,0,"button",13),o()),t&2){let e=a();s(3),g(e.showForm()?3:4)}}function ve(t,n){if(t&1&&l(0),t&2){let e=a();T(" ",e.topic().title," ")}}function we(t,n){t&1&&l(0," Secciones ")}function ye(t,n){if(t&1&&l(0),t&2){let e=a();T(" ",e.topic().title," ")}}function Fe(t,n){t&1&&l(0," Secciones ")}function Te(t,n){if(t&1){let e=x();c(0,"sections-card",17),f("deleted",function(){p(e);let r=a();return m(r.deleteSection())})("edited",function(){p(e);let r=a();return m(r.initialize())}),o()}if(t&2){let e=n.$implicit,i=a();d("section",e)("actualUser",i.actualUser())}}var ae=class t{#e=u(G);#t=u(w);#n=u(M);#i=u(q);actualUser=b(void 0);topic=P();showForm=b(!1);sections=b(void 0);constructor(){E(()=>{this.initialize(),this.actualUser.set(this.#i.currentUser.value()),console.log("USER: ",this.actualUser())})}initialize(){this.topic()?(this.#e.setTitle(this.topic().title+" ** Social Astro"),this.getSectionsByTopic()):this.getAllSections()}getAllSections(){this.#t.getSections().pipe(h(this.#n)).subscribe({next:n=>{this.sections.set(n)},error:n=>console.log(n.error.message)})}getSectionsByTopic(){this.#t.getSectionsByTopic(this.topic().id).pipe(h(this.#n)).subscribe({next:n=>{this.sections.set(n)},error:n=>console.log(n.error.message)})}showSectionForm(){this.showForm()===!0&&this.initialize(),this.showForm.update(n=>!n)}deleteSection(){this.initialize()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=O({type:t,selectors:[["sections-page"]],inputs:{topic:[1,"topic"]},decls:16,vars:3,consts:[[1,"fondo-card"],[1,"fondo-card","sections"],[1,"titulo-section"],[2,"text-align","left"],["src","assets/normal/normal_galaxy_topic.png","alt","Icono topics","width","40px",1,"image"],[1,"sun"],[1,"sunback"],[1,"suncontent"],[2,"text-align","center"],[1,"sections-card"],[3,"section","actualUser"],[2,"font-size","large"],[1,"col-12"],[1,"btn","btn-outline-info"],[3,"saved","hide","topic"],[1,"btn","btn-outline-info",3,"click"],["src","assets/normal/normal_system_section.png","alt","Icono sections","width","25px;"],[3,"deleted","edited","section","actualUser"]],template:function(e,i){e&1&&(C(0,Oe,5,1,"div",0),c(1,"div",1)(2,"div",2)(3,"h2",3),_(4,"img",4),C(5,ve,1,1)(6,we,1,0),o()(),c(7,"div",5),_(8,"div",6),c(9,"div",7)(10,"h2",8),C(11,ye,1,1)(12,Fe,1,0),o()()(),c(13,"span",9),V(14,Te,1,2,"sections-card",10,be),o()()),e&2&&(g(i.actualUser()&&i.actualUser().role==="ADMIN"?0:-1),s(5),g(i.topic()?5:6),s(6),g(i.topic()?11:12),s(3),k(i.sections()))},dependencies:[y,U],styles:['.fondo-card[_ngcontent-%COMP%]{border-radius:20px;padding:1.5rem;margin-bottom:1rem;opacity:.9;box-shadow:0 0 40px #00000080;border:2px solid rgba(13,0,50,.5);background:linear-gradient(to bottom,#0d0032cc,#000c);color:#fff}@media (min-width: 1500px){.principal[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr)}.principal[_ngcontent-%COMP%]   .home[_ngcontent-%COMP%]{grid-column:1/3}}@media (max-width: 1500px){.principal[_ngcontent-%COMP%]{display:flex;flex-direction:column}}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}@media (max-width: 1500px) and (min-width: 1300px){.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;text-align:left}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]{position:relative}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#c7b6c5;text-decoration:none}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background:linear-gradient(to left,#1c1635,#ab9ce0);bottom:0;left:0;transform:scaleX(0);transform-origin:left;transition:transform .4s ease-out}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]:hover:after{transform:scaleX(1)}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]   .post-aside[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-left:.2rem}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:.9;filter:blur(10px);box-shadow:0 0 5em #edeed499,0 0 10em #ccccc34d}50%{opacity:1;filter:blur(12px);box-shadow:0 0 6em #feffd4cc,0 0 12em #eaebdd80}}.fondo-card.sections[_ngcontent-%COMP%]{display:flex;flex-direction:column}.fondo-card.sections[_ngcontent-%COMP%]   .sections-card[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.5rem}@media (min-width: 1600px){.fondo-card.sections[_ngcontent-%COMP%]   .sun[_ngcontent-%COMP%]{position:absolute;width:25rem;height:25rem;bottom:0;right:0;z-index:1;pointer-events:none}.fondo-card.sections[_ngcontent-%COMP%]   .sun[_ngcontent-%COMP%]   .sunback[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;border-radius:50%;background:radial-gradient(circle,#fffff1e6 40%,#a6a7a166,#fdff8500);box-shadow:0 0 5em #fdff8599,0 0 10em #fdff854d;z-index:-1;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.fondo-card.sections[_ngcontent-%COMP%]   .sun[_ngcontent-%COMP%]   .suncontent[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;height:100%;color:#423977;text-align:center}.fondo-card.sections[_ngcontent-%COMP%]   .titulo-section[_ngcontent-%COMP%]{display:none}}@media (max-width: 1600px){.fondo-card.sections[_ngcontent-%COMP%]   .suncontent[_ngcontent-%COMP%]{display:none}}']})};export{ae as SectionsPageComponent};
