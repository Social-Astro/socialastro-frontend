"use strict";(self.webpackChunksocialastro_frontend=self.webpackChunksocialastro_frontend||[]).push([[520],{6520:(D,O,l)=>{l.r(O),l.d(O,{PostsFormComponent:()=>d});var e=l(1360),r=l(4341),C=l(8992),E=l(6688),b=l(6861),_=l(4395),B=l(345),h=l(9079),P=l(8434);const M=()=>({valid:"is-valid",invalid:"is-invalid"}),j=t=>({"d-none":t});function y(t,u){1&t&&(e.j41(0,"div",9),e.EFF(1,"Introduce t\xedtulo"),e.k0s())}function F(t,u){1&t&&(e.j41(0,"div",9),e.EFF(1,"Introduce una descripci\xf3n"),e.k0s())}function s(t,u){1&t&&(e.j41(0,"div",9),e.EFF(1,"Debes asociar el post a una tag"),e.k0s())}function n(t,u){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"img",28),e.k0s()),2&t){const c=e.XpG();e.R7$(),e.Y8G("src",c.imagesBase64[0],e.B4B)}}function i(t,u){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"img",29),e.k0s()),2&t){const c=e.XpG();e.R7$(),e.Y8G("src",c.imagesBase64[1],e.B4B)}}function a(t,u){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"img",30),e.k0s()),2&t){const c=e.XpG();e.R7$(),e.Y8G("src",c.imagesBase64[2],e.B4B)}}function p(t,u){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"img",31),e.k0s()),2&t){const c=e.XpG();e.R7$(),e.Y8G("src",c.imagesBase64[3],e.B4B)}}let d=(()=>{class t{#e=(0,e.WQX)(b.Ix);#t=(0,e.WQX)(_.v);#n=(0,e.WQX)(e.abz);#o=(0,e.WQX)(B.hE);imagesBase64=[];section=e.hFB.required();post=e.hFB.required();postForm=new r.gE({title:new r.MJ("",{nonNullable:!0,validators:[r.k0.required]}),description:new r.MJ("",{nonNullable:!0,validators:[r.k0.required]}),multimediaGroup:new r.gE({file1:new r.MJ(null),file2:new r.MJ(null),file3:new r.MJ(null),file4:new r.MJ(null)}),tag:new r.MJ("",{nonNullable:!0,validators:[r.k0.required]})});constructor(){(0,e.QZP)(()=>{console.log(this.section()),this.post()&&(this.#o.setTitle(this.post().title+" | Edit"),this.postForm.get("title").setValue(this.post().title),this.postForm.get("description").setValue(this.post().content.description),this.postForm.get("tag").setValue(this.post().tag),this.post().content.multimedia?.forEach(c=>{this.imagesBase64.push(c.filename)}))})}sendPost(){const g={title:this.postForm.get("title")?.getRawValue(),section:this.section()?this.section():this.post().section,content:{description:this.postForm.get("description")?.getRawValue(),updatedAt:new Date,multimedia:[]},tag:this.postForm.get("tag")?.getRawValue()};for(let o=0;o<this.imagesBase64.length;o++)this.post()&&this.post().content.multimedia[o]?g.content.multimedia.push({id:this.post().content.multimedia[o].id,filename:this.imagesBase64[o]}):g.content.multimedia.push({filename:this.imagesBase64[o]});this.post()?(g.content.id=this.post().content.id,g.content.user=this.post().content.user,this.imagesBase64.length||(g.content.multimedia=this.post().content.multimedia),this.#t.editPost(g,this.post().id).pipe((0,h.pQ)(this.#n)).subscribe({next:()=>{this.#e.navigate(["/home/posts",this.post().id])},error:o=>console.log(o.error.message)})):this.#t.addPost(g).pipe((0,h.pQ)(this.#n)).subscribe({next:()=>{this.#e.navigate(["/home/sections",this.section().id])},error:o=>console.log(o.error.message)})}dismiss(){this.section()?this.#e.navigate(["/home/sections",this.section().id]):this.#e.navigate(["/home/posts",this.post().id])}static \u0275fac=function(g){return new(g||t)};static \u0275cmp=e.VBU({type:t,selectors:[["posts-form"]],inputs:{section:[1,"section"],post:[1,"post"]},decls:56,vars:28,consts:[["fileImage",""],["fileImage2",""],["fileImage3",""],["fileImage4",""],[1,"fondo-card"],[1,"mt-4",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","name","title","formControlName","title",1,"form-control","input",3,"validationClasses"],[1,"invalid-feedback"],["for","description",1,"form-label"],["name","description","formControlName","description","rows","3",1,"form-control","input",3,"validationClasses"],["for","tag",1,"form-label"],["type","text","name","tag","formControlName","tag",1,"form-control","input",3,"validationClasses"],["formGroupName","multimediaGroup"],[1,"selectfiles"],[1,"files"],[1,"imgContainer"],["type","button",1,"inputfile",3,"click"],["type","file","name","file1","encodeBase64","",1,"form-control","d-none",3,"encoded"],["type","button",1,"inputfile",3,"click","disabled"],[3,"ngClass"],["type","file","name","file2","encodeBase64","",1,"form-control","d-none",3,"encoded"],["type","file","name","file3","encodeBase64","",1,"form-control","d-none",3,"encoded"],["type","file","name","file4","encodeBase64","",1,"form-control","d-none",3,"encoded"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","m-2",3,"disabled"],["type","button",1,"btn","m-2",3,"click"],["alt","","id","firstBase64",1,"imgPreview",3,"src"],["alt","","id","secondBase64",1,"imgPreview",3,"src"],["alt","","id","thirdBase64",1,"imgPreview",3,"src"],["alt","","id","fourthBase64",1,"imgPreview",3,"src"]],template:function(g,o){if(1&g){const f=e.RV6();e.j41(0,"div",4)(1,"form",5),e.bIt("ngSubmit",function(){return e.eBV(f),e.Njj(o.sendPost())}),e.j41(2,"div",6)(3,"label",7),e.EFF(4,"T\xedtulo"),e.k0s(),e.nrm(5,"input",8),e.SS7(6),e.DNE(7,y,2,0,"div",9),e.k0s(),e.j41(8,"div",6)(9,"label",10),e.EFF(10,"Descripci\xf3n"),e.k0s(),e.j41(11,"textarea",11),e.EFF(12,"          "),e.k0s(),e.SS7(13),e.DNE(14,F,2,0,"div",9),e.k0s(),e.j41(15,"div",6)(16,"label",12),e.EFF(17,"Nave nodriza ( # ): "),e.k0s(),e.nrm(18,"input",13),e.SS7(19),e.DNE(20,s,2,0,"div",9),e.k0s(),e.qex(21,14),e.j41(22,"div",15)(23,"div",16),e.DNE(24,n,2,1,"div",17),e.j41(25,"button",18),e.bIt("click",function(){e.eBV(f);const m=e.sdS(29);return e.Njj(m.click())}),e.j41(26,"span"),e.EFF(27,"+"),e.k0s(),e.j41(28,"input",19,0),e.bIt("encoded",function(m){return e.eBV(f),e.Njj(o.imagesBase64[0]=m)}),e.k0s()()(),e.j41(30,"div",16),e.DNE(31,i,2,1,"div",17),e.j41(32,"button",20),e.bIt("click",function(){e.eBV(f);const m=e.sdS(36);return e.Njj(m.click())}),e.j41(33,"span",21),e.EFF(34,"+"),e.k0s(),e.j41(35,"input",22,1),e.bIt("encoded",function(m){return e.eBV(f),e.Njj(o.imagesBase64[1]=m)}),e.k0s()()(),e.j41(37,"div",16),e.DNE(38,a,2,1,"div",17),e.j41(39,"button",20),e.bIt("click",function(){e.eBV(f);const m=e.sdS(43);return e.Njj(m.click())}),e.j41(40,"span",21),e.EFF(41,"+"),e.k0s(),e.j41(42,"input",23,2),e.bIt("encoded",function(m){return e.eBV(f),e.Njj(o.imagesBase64[2]=m)}),e.k0s()()(),e.j41(44,"div",16),e.DNE(45,p,2,1,"div",17),e.j41(46,"button",20),e.bIt("click",function(){e.eBV(f);const m=e.sdS(50);return e.Njj(m.click())}),e.j41(47,"span",21),e.EFF(48,"+"),e.k0s(),e.j41(49,"input",24,3),e.bIt("encoded",function(m){return e.eBV(f),e.Njj(o.imagesBase64[3]=m)}),e.k0s()()()(),e.bVm(),e.j41(51,"div",25)(52,"button",26),e.EFF(53),e.k0s(),e.j41(54,"button",27),e.bIt("click",function(){return e.eBV(f),e.Njj(o.dismiss())}),e.EFF(55," Abortar misi\xf3n "),e.k0s()()()()}if(2&g){let f,v,m;e.R7$(),e.Y8G("formGroup",o.postForm),e.R7$(4),e.Y8G("validationClasses",e.lJ4(19,M));const R=null==(f=o.postForm.get("title"))?null:f.errors;e.R7$(2),e.vxM(null!=R&&R.required?7:-1),e.R7$(4),e.Y8G("validationClasses",e.lJ4(20,M));const k=null==(v=o.postForm.get("description"))?null:v.errors;e.R7$(3),e.vxM(null!=k&&k.required?14:-1),e.R7$(4),e.Y8G("validationClasses",e.lJ4(21,M));const I=null==(m=o.postForm.get("tag"))?null:m.errors;e.R7$(2),e.vxM(null!=I&&I.required?20:-1),e.R7$(4),e.vxM(o.imagesBase64[0]?24:-1),e.R7$(7),e.vxM(o.imagesBase64[1]?31:-1),e.R7$(),e.Y8G("disabled",!o.imagesBase64[0]),e.R7$(),e.Y8G("ngClass",e.eq3(22,j,!o.imagesBase64[0])),e.R7$(5),e.vxM(o.imagesBase64[2]?38:-1),e.R7$(),e.Y8G("disabled",!o.imagesBase64[1]),e.R7$(),e.Y8G("ngClass",e.eq3(24,j,!o.imagesBase64[1])),e.R7$(5),e.vxM(o.imagesBase64[3]?45:-1),e.R7$(),e.Y8G("disabled",!o.imagesBase64[2]),e.R7$(),e.Y8G("ngClass",e.eq3(26,j,!o.imagesBase64[2])),e.R7$(5),e.Y8G("disabled",o.postForm.invalid),e.R7$(),e.SpI(" ",o.post()?"Editar planeta":"Terraformar"," ")}},dependencies:[r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,r.$R,C.D,E.f,P.YU],styles:['.fondo-card[_ngcontent-%COMP%]{border-radius:20px;padding:1.5rem;margin-bottom:1rem;opacity:.9;box-shadow:0 0 40px #00000080;border:2px solid rgba(13,0,50,.5);background:linear-gradient(to bottom,#0d0032cc,#000c);color:#fff}@media (min-width: 1500px){.principal[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr)}.principal[_ngcontent-%COMP%]   .home[_ngcontent-%COMP%]{grid-column:1/3}}@media (max-width: 1500px){.principal[_ngcontent-%COMP%]{display:flex;flex-direction:column}}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}@media (max-width: 1500px) and (min-width: 1300px){.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;text-align:left}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]{position:relative}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#c7b6c5;text-decoration:none}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background:linear-gradient(to left,#1c1635,#ab9ce0);bottom:0;left:0;transform:scaleX(0);transform-origin:left;transition:transform .4s ease-out}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]:hover:after{transform:scaleX(1)}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]   .post-aside[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-left:.2rem}.input[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#0d0032cc,#000c);color:#d6a3d6}.selectfiles[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr)}.selectfiles[_ngcontent-%COMP%]   .files[_ngcontent-%COMP%]{background-color:#6e8c6e;position:relative;padding:2rem;overflow:hidden;border:1px solid #7fb37f;height:100px}.selectfiles[_ngcontent-%COMP%]   .files[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;overflow:hidden}.selectfiles[_ngcontent-%COMP%]   .files[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   .imgPreview[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;opacity:.3}.selectfiles[_ngcontent-%COMP%]   .files[_ngcontent-%COMP%]   .inputfile[_ngcontent-%COMP%]{position:absolute;z-index:1;left:45%;top:25%;background-color:transparent;border:0;color:#c4c4c4;transform:scale(3)}']})}return t})()},6688:(D,O,l)=>{l.d(O,{f:()=>b});var e=l(1360),r=l(9079),C=l(4341),E=l(983);let b=(()=>{class _{#e=(0,e.WQX)(C.vS,{optional:!0});#t=(0,e.WQX)(C.vO,{optional:!0});#n=(0,e.WQX)(e.zZn);validationClasses=(0,e.hFB)();valueChanges;touched=(0,e.vPA)(!1);ngOnInit(){this.valueChanges=(0,r.ot)(this.#e?.valueChanges??this.#t?.valueChanges??E.w,{injector:this.#n})}inputClass=(0,e.EWP)(()=>{const h=this.touched(),P=this.validationClasses();return this.valueChanges(),(0,e.O8t)(()=>h?this.#e?.invalid||this.#t?.invalid?P?.invalid:P?.valid:"")});static \u0275fac=function(P){return new(P||_)};static \u0275dir=e.FsC({type:_,selectors:[["","validationClasses","","ngModel",""],["","validationClasses","","formControl",""],["","validationClasses","","formControlName",""]],hostVars:2,hostBindings:function(P,M){1&P&&e.bIt("blur",function(){return M.touched.set(!0)}),2&P&&e.HbH(M.inputClass())},inputs:{validationClasses:[1,"validationClasses"]}})}return _})()},8992:(D,O,l)=>{l.d(O,{D:()=>r});var e=l(1360);let r=(()=>{class C{encoded=(0,e.CGW)();element=(0,e.WQX)(e.aKT);encodeFile(){const b=this.element.nativeElement;if(!b.files?.length)return void this.encoded.emit("");const _=new FileReader;_.readAsDataURL(b.files[0]),_.addEventListener("loadend",()=>{this.encoded.emit(_.result)})}static \u0275fac=function(_){return new(_||C)};static \u0275dir=e.FsC({type:C,selectors:[["input","type","file","encodeBase64",""]],hostBindings:function(_,B){1&_&&e.bIt("change",function(){return B.encodeFile()})},outputs:{encoded:"encoded"}})}return C})()},9079:(D,O,l)=>{l.d(O,{ZX:()=>F,ot:()=>M,pQ:()=>E});var e=l(1360),r=l(1985),C=l(6977);function E(s){s||((0,e.Af3)(E),s=(0,e.WQX)(e.abz));const n=new r.c(i=>s.onDestroy(i.next.bind(i)));return i=>i.pipe((0,C.Q)(n))}function M(s,n){const i=!n?.manualCleanup;i&&!n?.injector&&(0,e.Af3)(M);const a=i?n?.injector?.get(e.abz)??(0,e.WQX)(e.abz):null,p=function j(s=Object.is){return(n,i)=>1===n.kind&&1===i.kind&&s(n.value,i.value)}(n?.equal);let d;d=(0,e.vPA)(n?.requireSync?{kind:0}:{kind:1,value:n?.initialValue},{equal:p});const t=s.subscribe({next:u=>d.set({kind:1,value:u}),error:u=>{if(n?.rejectErrors)throw u;d.set({kind:2,error:u})}});if(n?.requireSync&&0===d().kind)throw new e.wOt(601,!1);return a?.onDestroy(t.unsubscribe.bind(t)),(0,e.EWP)(()=>{const u=d();switch(u.kind){case 1:return u.value;case 2:throw u.error;case 0:throw new e.wOt(601,!1)}},{equal:n?.equal})}function F(s){return s?.injector||(0,e.Af3)(F),(0,e.ZcF)({...s,loader:void 0,stream:n=>{let i;const a=()=>i.unsubscribe();n.abortSignal.addEventListener("abort",a);const p=(0,e.vPA)({value:void 0});let d;const t=new Promise(c=>d=c);function u(c){p.set(c),d?.(p),d=void 0}return i=s.loader(n).subscribe({next:c=>u({value:c}),error:c=>u({error:c}),complete:()=>{d&&u({error:new Error("Resource completed before producing a value")}),n.abortSignal.removeEventListener("abort",a)}}),t}})}}}]);