import{a as te}from"./chunk-V7PQRUJG.js";import{a as ee}from"./chunk-5677HV7J.js";import{a as X}from"./chunk-AW7RF5R2.js";import{b as H,c as y,e as J,f as K,g as E,i as C,k as Q,m as W,n as Y,o as Z,v as $}from"./chunk-EDEUMYWG.js";import{a as S}from"./chunk-3TMGCKTS.js";import{g as A,i as L}from"./chunk-FWI7O2YG.js";import{j}from"./chunk-GT6PACLV.js";import{Aa as n,Db as M,Hb as O,Ib as F,Ka as I,Pa as g,S as P,Wa as a,Z as p,_ as u,_b as U,ab as _,da as D,eb as t,fb as i,gb as v,hb as G,ib as q,ka as x,kb as R,nb as f,ob as b,wb as w,xa as h,xb as l,zb as z}from"./chunk-W4ZOI5UP.js";import"./chunk-7CGTOI24.js";var B=()=>({valid:"is-valid",invalid:"is-invalid"}),V=o=>({"d-none":o});function ne(o,c){o&1&&(t(0,"div",9),l(1,"Introduce t\xEDtulo"),i())}function oe(o,c){o&1&&(t(0,"div",9),l(1,"Introduce una descripci\xF3n"),i())}function re(o,c){o&1&&(t(0,"div",9),l(1,"Debes asociar el post a una tag"),i())}function se(o,c){if(o&1&&(t(0,"div",17),v(1,"img",28),i()),o&2){let r=b();n(),a("src",r.imagesBase64[0],h)}}function ae(o,c){if(o&1&&(t(0,"div",17),v(1,"img",29),i()),o&2){let r=b();n(),a("src",r.imagesBase64[1],h)}}function le(o,c){if(o&1&&(t(0,"div",17),v(1,"img",30),i()),o&2){let r=b();n(),a("src",r.imagesBase64[2],h)}}function me(o,c){if(o&1&&(t(0,"div",17),v(1,"img",31),i()),o&2){let r=b();n(),a("src",r.imagesBase64[3],h)}}var ie=class o{#e=P(L);#t=P(X);#i=P(D);#n=P(A);imagesBase64=[];section=x.required();post=x.required();postForm=new E({title:new C("",{nonNullable:!0,validators:[y.required]}),description:new C("",{nonNullable:!0,validators:[y.required]}),multimediaGroup:new E({file1:new C(null),file2:new C(null),file3:new C(null),file4:new C(null)}),tag:new C("",{nonNullable:!0,validators:[y.required]})});constructor(){U(()=>{console.log(this.section()),this.post()&&(this.#n.setTitle(this.post().title+" | Edit"),this.postForm.get("title").setValue(this.post().title),this.postForm.get("description").setValue(this.post().content.description),this.postForm.get("tag").setValue(this.post().tag),this.post().content.multimedia?.forEach(c=>{this.imagesBase64.push(c.filename)}))})}sendPost(){let c=[],r={title:this.postForm.get("title")?.getRawValue(),section:this.section()?this.section():this.post().section,content:{description:this.postForm.get("description")?.getRawValue(),updatedAt:new Date,multimedia:c},tag:this.postForm.get("tag")?.getRawValue()};for(let e=0;e<this.imagesBase64.length;e++)this.post()&&this.post().content.multimedia[e]?r.content.multimedia.push({id:this.post().content.multimedia[e].id,filename:this.imagesBase64[e]}):r.content.multimedia.push({filename:this.imagesBase64[e]});this.post()?(r.content.id=this.post().content.id,r.content.user=this.post().content.user,this.imagesBase64.length||(r.content.multimedia=this.post().content.multimedia),this.#t.editPost(r,this.post().id).pipe(S(this.#i)).subscribe({next:()=>{this.#e.navigate(["/home/posts",this.post().id])},error:e=>console.log(e.error.message)})):this.#t.addPost(r).pipe(S(this.#i)).subscribe({next:()=>{this.#e.navigate(["/home/sections",this.section().id])},error:e=>console.log(e.error.message)})}dismiss(){this.section()?this.#e.navigate(["/home/sections",this.section().id]):this.#e.navigate(["/home/posts",this.post().id])}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=I({type:o,selectors:[["posts-form"]],inputs:{section:[1,"section"],post:[1,"post"]},decls:56,vars:28,consts:[["fileImage",""],["fileImage2",""],["fileImage3",""],["fileImage4",""],[1,"fondo-card"],[1,"mt-4",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","name","title","formControlName","title",1,"form-control","input",3,"validationClasses"],[1,"invalid-feedback"],["for","description",1,"form-label"],["name","description","formControlName","description","rows","3",1,"form-control","input",3,"validationClasses"],["for","tag",1,"form-label"],["type","text","name","tag","formControlName","tag",1,"form-control","input",3,"validationClasses"],["formGroupName","multimediaGroup"],[1,"selectfiles"],[1,"files"],[1,"imgContainer"],["type","button",1,"inputfile",3,"click"],["type","file","name","file1","encodeBase64","",1,"form-control","d-none",3,"encoded"],["type","button",1,"inputfile",3,"click","disabled"],[3,"ngClass"],["type","file","name","file2","encodeBase64","",1,"form-control","d-none",3,"encoded"],["type","file","name","file3","encodeBase64","",1,"form-control","d-none",3,"encoded"],["type","file","name","file4","encodeBase64","",1,"form-control","d-none",3,"encoded"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","m-2",3,"disabled"],["type","button",1,"btn","m-2",3,"click"],["alt","","id","firstBase64",1,"imgPreview",3,"src"],["alt","","id","secondBase64",1,"imgPreview",3,"src"],["alt","","id","thirdBase64",1,"imgPreview",3,"src"],["alt","","id","fourthBase64",1,"imgPreview",3,"src"]],template:function(r,e){if(r&1){let m=R();t(0,"div",4)(1,"form",5),f("ngSubmit",function(){return p(m),u(e.sendPost())}),t(2,"div",6)(3,"label",7),l(4,"T\xEDtulo"),i(),v(5,"input",8),M(6),g(7,ne,2,0,"div",9),i(),t(8,"div",6)(9,"label",10),l(10,"Descripci\xF3n"),i(),t(11,"textarea",11),l(12,"          "),i(),M(13),g(14,oe,2,0,"div",9),i(),t(15,"div",6)(16,"label",12),l(17,"Nave nodriza ( # ): "),i(),v(18,"input",13),M(19),g(20,re,2,0,"div",9),i(),G(21,14),t(22,"div",15)(23,"div",16),g(24,se,2,1,"div",17),t(25,"button",18),f("click",function(){p(m);let s=w(29);return u(s.click())}),t(26,"span"),l(27,"+"),i(),t(28,"input",19,0),f("encoded",function(s){return p(m),u(e.imagesBase64[0]=s)}),i()()(),t(30,"div",16),g(31,ae,2,1,"div",17),t(32,"button",20),f("click",function(){p(m);let s=w(36);return u(s.click())}),t(33,"span",21),l(34,"+"),i(),t(35,"input",22,1),f("encoded",function(s){return p(m),u(e.imagesBase64[1]=s)}),i()()(),t(37,"div",16),g(38,le,2,1,"div",17),t(39,"button",20),f("click",function(){p(m);let s=w(43);return u(s.click())}),t(40,"span",21),l(41,"+"),i(),t(42,"input",23,2),f("encoded",function(s){return p(m),u(e.imagesBase64[2]=s)}),i()()(),t(44,"div",16),g(45,me,2,1,"div",17),t(46,"button",20),f("click",function(){p(m);let s=w(50);return u(s.click())}),t(47,"span",21),l(48,"+"),i(),t(49,"input",24,3),f("encoded",function(s){return p(m),u(e.imagesBase64[3]=s)}),i()()()(),q(),t(51,"div",25)(52,"button",26),l(53),i(),t(54,"button",27),f("click",function(){return p(m),u(e.dismiss())}),l(55," Abortar misi\xF3n "),i()()()()}if(r&2){let m,d,s;n(),a("formGroup",e.postForm),n(4),a("validationClasses",O(19,B));let k=(m=e.postForm.get("title"))==null?null:m.errors;n(2),_(k!=null&&k.required?7:-1),n(4),a("validationClasses",O(20,B));let T=(d=e.postForm.get("description"))==null?null:d.errors;n(3),_(T!=null&&T.required?14:-1),n(4),a("validationClasses",O(21,B));let N=(s=e.postForm.get("tag"))==null?null:s.errors;n(2),_(N!=null&&N.required?20:-1),n(4),_(e.imagesBase64[0]?24:-1),n(7),_(e.imagesBase64[1]?31:-1),n(),a("disabled",!e.imagesBase64[0]),n(),a("ngClass",F(22,V,!e.imagesBase64[0])),n(5),_(e.imagesBase64[2]?38:-1),n(),a("disabled",!e.imagesBase64[1]),n(),a("ngClass",F(24,V,!e.imagesBase64[1])),n(5),_(e.imagesBase64[3]?45:-1),n(),a("disabled",!e.imagesBase64[2]),n(),a("ngClass",F(26,V,!e.imagesBase64[2])),n(5),a("disabled",e.postForm.invalid),n(),z(" ",e.post()?"Editar planeta":"Terraformar"," ")}},dependencies:[$,Q,H,J,K,W,Z,Y,te,ee,j],styles:['.fondo-card[_ngcontent-%COMP%]{border-radius:20px;padding:1.5rem;margin-bottom:1rem;opacity:.9;box-shadow:0 0 40px #00000080;border:2px solid rgba(13,0,50,.5);background:linear-gradient(to bottom,#0d0032cc,#000c);color:#fff}@media (min-width: 1500px){.principal[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr)}.principal[_ngcontent-%COMP%]   .home[_ngcontent-%COMP%]{grid-column:1/3}}@media (max-width: 1500px){.principal[_ngcontent-%COMP%]{display:flex;flex-direction:column}}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}@media (max-width: 1500px) and (min-width: 1300px){.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;text-align:left}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]{position:relative}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#c7b6c5;text-decoration:none}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background:linear-gradient(to left,#1c1635,#ab9ce0);bottom:0;left:0;transform:scaleX(0);transform-origin:left;transition:transform .4s ease-out}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]:hover:after{transform:scaleX(1)}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]   .post-aside[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-left:.2rem}.input[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#0d0032cc,#000c);color:#d6a3d6}.selectfiles[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr)}.selectfiles[_ngcontent-%COMP%]   .files[_ngcontent-%COMP%]{background-color:#6e8c6e;position:relative;padding:2rem;overflow:hidden;border:1px solid #7fb37f;height:100px}.selectfiles[_ngcontent-%COMP%]   .files[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;overflow:hidden}.selectfiles[_ngcontent-%COMP%]   .files[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   .imgPreview[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;opacity:.3}.selectfiles[_ngcontent-%COMP%]   .files[_ngcontent-%COMP%]   .inputfile[_ngcontent-%COMP%]{position:absolute;z-index:1;left:45%;top:25%;background-color:transparent;border:0;color:#c4c4c4;transform:scale(3)}']})};export{ie as PostsFormComponent};
