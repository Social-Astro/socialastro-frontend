import{b as N}from"./chunk-4STJHMTN.js";import{a as A}from"./chunk-5677HV7J.js";import{b as O,c as b,e as k,f as q,g as V,i as _,k as z,m as I,o as G,u as T,v as R}from"./chunk-EDEUMYWG.js";import"./chunk-3TMGCKTS.js";import{i as M,j as D}from"./chunk-FWI7O2YG.js";import"./chunk-GT6PACLV.js";import{Aa as r,Db as v,Hb as g,Ka as y,Pa as c,S as f,Wa as m,Z as h,_ as w,ab as p,eb as e,fb as t,gb as i,kb as F,ma as E,nb as P,ob as S,xb as a,yb as L}from"./chunk-W4ZOI5UP.js";import"./chunk-7CGTOI24.js";var U=()=>({valid:"is-valid",invalid:"is-invalid"}),j=()=>["/auth/register"];function W(n,s){n&1&&(e(0,"div",7),a(1,"El usuario es requerido"),t())}function B(n,s){n&1&&(e(0,"div",7),a(1,"La contrase\xF1a es requerida"),t())}function H(n,s){if(n&1&&(e(0,"div",16),i(1,"img",19),e(2,"div",20),a(3),t()()),n&2){let o=S();r(3),L(o.loginError())}}var Y=class n{#e=f(N);#t=f(M);loginForm=new V({username:new _("",{nonNullable:!0,validators:[b.required]}),password:new _("",{nonNullable:!0,validators:[b.required]})});loginError=E(null);login(){this.loginError.set(null);let s={username:this.loginForm.value.username,password:this.loginForm.value.password};this.loginForm.valid?this.#e.login(s).subscribe({next:()=>{this.saved=!0,this.#t.navigate(["/home"])},error:o=>{console.error("Login error:",o),o.status===401?this.loginError.set("\xBFEst\xE1s seguro de que te has montado en tu nave...?"):this.loginError.set("Woops, esto es embarazoso. Es culpa nuestra..")}}):(this.loginError.set("Escribe bien... es humano no extraterrestre."),console.error("Formulario inv\xE1lido"))}saved=!1;resetForm(){this.loginForm.reset(),this.saved=!1}canDeactivate(){return this.saved||this.loginForm.pristine||confirm("\xBFDe verdad quieres salir? Vas a perder los datos.")}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=y({type:n,selectors:[["login-page"]],decls:28,vars:11,consts:[[1,"text-center","mb-3","register-card"],[1,"card-body"],[1,"card-title"],["action","#","id","form-login",1,"mt-4",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","username",1,"form-label"],["type","username","id","username","formControlName","username","name","username","placeholder","Usuario",1,"form-control",3,"validationClasses"],[1,"invalid-feedback"],["for","password"],["type","password","name","password","formControlName","password","id","password","placeholder","Contrase\xF1a",1,"form-control",3,"validationClasses"],["id","errorInfo",1,"text-danger"],["type","submit",1,"btn","btn-primary","my-1",3,"disabled"],["src","assets/normal/normal_rocket_login.png","alt","Login"],[1,"mx-4"],[1,"btn","btn-secondary",3,"routerLink"],["src","assets/normal/normal_spaceship_register.png","alt","Register",1,"img-wallpaper"],[1,"login-error-card","animate-error-card"],[1,"icon-large-container",2,"position","fixed","bottom","40px","right","0%"],["src","assets/normal/normal_rocket_login.png","alt","Login Icon",2,"width","25rem","opacity","0.8"],["src","assets/normal/normal_meteor_delete.png","alt","Error",1,"error-icon"],[1,"error-message"]],template:function(o,l){if(o&1){let d=F();e(0,"div",0)(1,"div",1)(2,"h5",2),a(3,"Ad\xE9ntrate en la galaxia"),t(),e(4,"form",3),P("ngSubmit",function(){return h(d),w(l.login())}),e(5,"div",4)(6,"label",5),a(7,"Usuario"),t(),i(8,"input",6),v(9),c(10,W,2,0,"div",7),t(),e(11,"div",4)(12,"label",8),a(13,"Password:"),t(),i(14,"input",9),v(15),c(16,B,2,0,"div",7),t(),i(17,"p",10),e(18,"button",11),i(19,"img",12),a(20," Despegar "),t(),i(21,"span",13),e(22,"a",14),i(23,"img",15),a(24," Crear Nave "),t()()()(),c(25,H,4,1,"div",16),e(26,"div",17),i(27,"img",18),t()}if(o&2){let d,u;r(4),m("formGroup",l.loginForm),r(4),m("validationClasses",g(8,U));let x=(d=l.loginForm.get("username"))==null?null:d.errors;r(2),p(x!=null&&x.required?10:-1),r(4),m("validationClasses",g(9,U));let C=(u=l.loginForm.get("password"))==null?null:u.errors;r(2),p(C!=null&&C.required?16:-1),r(2),m("disabled",l.loginForm.invalid),r(4),m("routerLink",g(10,j)),r(3),p(l.loginError()?25:-1)}},dependencies:[D,T,z,O,k,q,R,I,G,A],styles:[".card-body[_ngcontent-%COMP%]{z-index:1;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);opacity:.9;border-radius:1.5rem;box-shadow:0 0 40px #00000080;border:2px solid rgba(13,0,50,.5);background:linear-gradient(to bottom,#0d0032cc,#000c);font-size:.9rem;color:#fff;padding:2.5rem}.card-body[_ngcontent-%COMP%]   btn[_ngcontent-%COMP%]{align-items:center}.custom-popup-error[_ngcontent-%COMP%]{position:absolute;transform:translate(-50%);background:linear-gradient(90deg,#ff4e50,#f9d423);color:#fff;padding:1.2rem 2.2rem;border-radius:1.2rem;box-shadow:0 4px 24px #00000040;z-index:9999;font-size:1.1rem;font-weight:600;display:flex;flex-direction:column;align-items:center;animation:_ngcontent-%COMP%_fadeInDown .5s}.login-error-card[_ngcontent-%COMP%]{position:fixed;top:200px;left:50%;transform:translate(-50%);background:#2d0036;color:#fff;border-radius:1.2rem;box-shadow:0 4px 24px #00000040;padding:1.5rem 2.5rem;display:flex;flex-direction:column;align-items:center;z-index:10000;border:2px solid #ff4e50;font-size:1.1rem;font-weight:600}.error-icon[_ngcontent-%COMP%]{width:40px;margin-bottom:10px}.error-message[_ngcontent-%COMP%]{text-align:center}.animate-error-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInDown 2s}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-50px) translate(-50%)}to{opacity:1;transform:translateY(0) translate(-50%)}}"]})};export{Y as LoginPageComponent};
