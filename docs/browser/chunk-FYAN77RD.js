import{a as T}from"./chunk-5D7HY5S6.js";import{a as L}from"./chunk-HQ3OAQKB.js";import"./chunk-6KH5BT37.js";import{b as k}from"./chunk-4STJHMTN.js";import"./chunk-GZEBAZYZ.js";import{a as U}from"./chunk-QVJEC5VS.js";import"./chunk-6R4RIIF6.js";import"./chunk-GFFBMY3N.js";import"./chunk-7TJXTN3F.js";import{a as A}from"./chunk-AW7RF5R2.js";import{a as _}from"./chunk-3TMGCKTS.js";import{j as w}from"./chunk-FWI7O2YG.js";import{m as E}from"./chunk-GT6PACLV.js";import{Aa as t,Db as x,Ib as c,Ka as y,Ob as P,Pa as g,S as u,Wa as r,_b as S,ab as v,da as b,eb as n,fb as i,gb as s,ma as d,ob as C,xa as M,xb as l,yb as m,zb as f}from"./chunk-W4ZOI5UP.js";import"./chunk-7CGTOI24.js";var V=o=>({"background-image":o}),h=o=>["/profile",o],O=o=>["/home/posts",o];function F(o,a){if(o&1&&(x(0),n(1,"div",5),s(2,"p-tag",6),n(3,"div",7),l(4),i(),n(5,"div",8),s(6,"img",9),l(7),i(),n(8,"div",10)(9,"a",11),s(10,"p-avatar",12),i(),n(11,"a",13),s(12,"img",14),i()(),n(13,"div",15),l(14,"Sistema: "),s(15,"br"),n(16,"p",16),l(17),i()()()),o&2){let e=a.$implicit,p=e.content.multimedia.length>0?e.content.multimedia[0].filename:"assets/normal/normal_planet_post.png";t(),r("ngStyle",c(8,V,"url("+p+")")),t(),r("value",e.tag),t(2),m(e.title),t(3),f(" ",e.numComments," "),t(2),r("routerLink",c(10,h,e.content.user.id)),t(),r("image",e.content.user.avatar),t(),r("routerLink",c(12,O,e.id)),t(6),m(e.section.title)}}function D(o,a){if(o&1&&(n(0,"div",4),x(1),s(2,"img",17),n(3,"div",18)(4,"h3"),l(5),i(),n(6,"p"),l(7),i(),n(8,"div",19)(9,"div",15)(10,"p",20),l(11,"Sistema: "),i(),n(12,"p",16),l(13),i()(),n(14,"div",21)(15,"a",11),s(16,"p-avatar",12),i(),n(17,"a",22),s(18,"img",23),i()()()()()),o&2){let e=C(),p=e.postAleatorio().content.multimedia.length>0?e.postAleatorio().content.multimedia[0].filename:"assets/normal/normal_planet_post.png";t(2),r("src",p,M)("alt",e.postAleatorio().title),t(3),m(e.postAleatorio().title),t(2),m(e.postAleatorio().content.description),t(6),m(e.postAleatorio().section.title),t(2),r("routerLink",c(8,h,e.postAleatorio().content.user.id)),t(),r("image",e.postAleatorio().content.user.avatar),t(),r("routerLink",c(10,O,e.postAleatorio().id))}}function R(o,a){if(o&1&&(x(0),n(1,"div",5),s(2,"p-tag",6),n(3,"div",7),l(4),i(),n(5,"div",8),s(6,"img",9),l(7),i(),n(8,"div",24)(9,"a",11),s(10,"p-avatar",12),i(),n(11,"a",25),s(12,"img",14),i()(),n(13,"div",15),l(14,"Sistema: "),s(15,"br"),n(16,"p",16),l(17),i()()()),o&2){let e=a.$implicit,p=e.content.multimedia.length>0?e.content.multimedia[0].filename:"assets/normal/normal_planet_post.png";t(),r("ngStyle",c(8,V,"url("+p+")")),t(),r("value",e.tag),t(2),m(e.title),t(3),f(" ",e.numComments," "),t(2),r("routerLink",c(10,h,e.content.user.id)),t(),r("image",e.content.user.avatar),t(),r("routerLink",c(12,O,e.id)),t(6),m(e.section.title)}}function j(o,a){if(o&1&&(n(0,"div",1)(1,"h2"),l(2),i(),n(3,"p-carousel",2),g(4,R,18,14,"ng-template",null,0,P),i()()),o&2){let e=C();t(2),f("Otros planetas basados en ",e.postsUsuario()[0].tag,""),t(),r("value",e.ordenadosTag1())("numVisible",5)("numScroll",1)("responsiveOptions",e.responsiveOptions)}}var I=class o{#e=u(A);#t=u(b);#n=u(k);actualUser=d(void 0);posts=d([]);postsUsuario=d([]);ordenadosTag1=d([]);ordenadosTag2=d([]);numAleatorio=0;postAleatorio=d(null);responsiveOptions;constructor(){this.getPosts(),S(()=>{this.actualUser.set(this.#n.currentUser.value()),console.log("User",this.actualUser()),this.getPostsUsuario()}),this.responsiveOptions=[{breakpoint:"1400px",numVisible:3,numScroll:1},{breakpoint:"1199px",numVisible:3,numScroll:1},{breakpoint:"767px",numVisible:2,numScroll:1},{breakpoint:"575px",numVisible:1,numScroll:1}]}getPosts(){this.#e.getPosts().pipe(_(this.#t)).subscribe({next:a=>{this.posts.set(a),this.numAleatorio=Math.ceil(Math.random()*this.posts().length),this.postAleatorio.set(a[this.numAleatorio])},error:a=>{console.log(a.error.message)}})}getPostsUsuario(){this.actualUser()&&this.#e.getPostsByUser(this.actualUser().id).pipe(_(this.#t)).subscribe({next:a=>{this.postsUsuario.set(a.posts),console.log("POSTS USUARIO",this.postsUsuario()),this.getPostsByTags()},error:a=>{console.log(a.error.message)}})}getPostsByTags(){this.#e.getPostsByTag(this.postsUsuario()[0].tag).pipe(_(this.#t)).subscribe({next:a=>{this.ordenadosTag1.set(a),console.log("TAGS: ",this.ordenadosTag1())},error:a=>{console.log(a.error.message)}}),console.log("TAGS: ",this.ordenadosTag1())}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["explore"]],decls:11,vars:6,consts:[["item",""],[1,"fondo-card","mt-3"],[3,"value","numVisible","numScroll","responsiveOptions"],[1,"fondo-card"],[1,"aleatorio"],[1,"border","border-surface-200","dark:border-surface-700","rounded","m-2","p-4","post-card",3,"ngStyle"],["severity","info",3,"value"],[1,"mt-4","font-medium","post-text"],[1,"mb-4","font-medium","post-text"],["src","assets/normal/normal_planet_comment.png","alt","","width","30px"],[1,"d-flex","justify-content-between","mb-o"],[1,"align-self-center",3,"routerLink"],["size","normal","shape","circle",1,"mr-2",3,"image"],[1,"btn","m-2","enlace",3,"routerLink"],["src","assets/normal/normal_planet_system3.png","alt","Visitar","title","Visitar","width","40px"],[1,"font-small"],[1,"enlace"],[3,"src","alt"],[1,"aleatorio-texto"],[1,"d-flex","justify-content-between"],[1,"mb-0"],[1,"d-flex","redirec"],[1,"btn","enlace",3,"routerLink"],["src","assets/normal/normal_planet_system3.png","alt","Visitar","title","Visitar","width","40px",1,"enlace-post"],[1,"d-flex","justify-content-between","mb-0"],[1,"btn","m-2","boton-post",3,"routerLink"]],template:function(e,p){e&1&&(n(0,"div",1)(1,"h2"),l(2,"\xDAltimos planetas terraformados"),i(),n(3,"p-carousel",2),g(4,F,18,14,"ng-template",null,0,P),i()(),n(6,"div",3)(7,"h2"),l(8,"Aparici\xF3n aleatoria en el radar"),i(),g(9,D,19,12,"div",4),i(),g(10,j,6,5,"div",1)),e&2&&(t(3),r("value",p.posts())("numVisible",5)("numScroll",1)("responsiveOptions",p.responsiveOptions),t(6),v(p.postAleatorio()?9:-1),t(),v(p.postsUsuario()[0]&&p.ordenadosTag1()?10:-1))},dependencies:[T,E,U,w,L],styles:['.fondo-card[_ngcontent-%COMP%]{border-radius:20px;padding:1.5rem;margin-bottom:1rem;opacity:.9;box-shadow:0 0 40px #00000080;border:2px solid rgba(13,0,50,.5);background:linear-gradient(to bottom,#0d0032cc,#000c);color:#fff}@media (min-width: 1500px){.principal[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr)}.principal[_ngcontent-%COMP%]   .home[_ngcontent-%COMP%]{grid-column:1/3}}@media (max-width: 1500px){.principal[_ngcontent-%COMP%]{display:flex;flex-direction:column}}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}@media (max-width: 1500px) and (min-width: 1300px){.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;text-align:left}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]{position:relative}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#c7b6c5;text-decoration:none}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background:linear-gradient(to left,#1c1635,#ab9ce0);bottom:0;left:0;transform:scaleX(0);transform-origin:left;transition:transform .4s ease-out}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]:hover:after{transform:scaleX(1)}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]   .post-aside[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-left:.2rem}.aleatorio[_ngcontent-%COMP%]{display:flex}.aleatorio[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.enlace-post){width:300px;border-radius:15px}.aleatorio[_ngcontent-%COMP%]   .aleatorio-texto[_ngcontent-%COMP%]{margin-left:1.5rem;flex-grow:1}.aleatorio[_ngcontent-%COMP%]   .redirec[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:.5rem}.post-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#c7c7c7cb;background-blend-mode:lighten;background-size:cover;background-position:center;border-radius:8px;width:180px}.post-card[_ngcontent-%COMP%]   .post-text[_ngcontent-%COMP%]{color:#7d3c7d;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.post-card[_ngcontent-%COMP%]   .boton-post[_ngcontent-%COMP%]{align-self:end}.enlace[_ngcontent-%COMP%]{text-decoration:none;color:#7d3c7d;font-weight:700}']})};export{I as ExploreComponent};
