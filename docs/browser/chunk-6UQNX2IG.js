import{a as z}from"./chunk-MW6O246A.js";import{a as B,b as $}from"./chunk-6KH5BT37.js";import{b as q}from"./chunk-4STJHMTN.js";import{a as y}from"./chunk-C3UKUFRZ.js";import{a as tt}from"./chunk-5677HV7J.js";import"./chunk-UZKQSB4C.js";import"./chunk-QDXQE2EN.js";import"./chunk-6R4RIIF6.js";import"./chunk-GFFBMY3N.js";import"./chunk-7TJXTN3F.js";import{b as X,c as E,e as Y,f as H,k as J,m as K,o as Q,t as W,v as Z}from"./chunk-EDEUMYWG.js";import{a as M}from"./chunk-3TMGCKTS.js";import{j as L}from"./chunk-FWI7O2YG.js";import{j as G}from"./chunk-GT6PACLV.js";import{Aa as l,Hb as w,Ib as k,Ka as b,Pa as f,S as g,Wa as d,Z as s,_ as p,_b as F,ab as P,cb as R,da as h,db as I,eb as r,fb as o,gb as _,ja as O,ka as v,kb as C,ma as x,nb as m,ob as a,wb as A,xb as u,yb as j}from"./chunk-W4ZOI5UP.js";import{a as N,b as D}from"./chunk-7CGTOI24.js";var ct=()=>({row:"!partial"}),U=()=>({valid:"is-valid",invalid:"is-invalid"});function rt(e,n){if(e&1){let t=C();r(0,"div",1)(1,"label",2),u(2,"Nombre"),o(),_(3,"input",3),o(),r(4,"div",1)(5,"label",4),u(6,"Descripci\xF3n"),o(),_(7,"input",5),o(),r(8,"div",6)(9,"button",7),u(10," Guardar "),o(),r(11,"button",8),m("click",function(){s(t);let c=a();return p(c.hideForm())}),u(12," Abortar misi\xF3n "),o()()}if(e&2){let t=a();l(3),d("validationClasses",w(3,U)),l(4),d("validationClasses",w(4,U)),l(2),d("disabled",t.topicForm.invalid)}}function at(e,n){if(e&1){let t=C();_(0,"input",9),r(1,"div",6)(2,"button",10),_(3,"i",11),o(),r(4,"button",12),m("click",function(){s(t);let c=a();return p(c.hideForm())}),_(5,"i",13),o()()}if(e&2){let t=a();d("validationClasses",w(2,U)),l(2),d("disabled",t.topicForm.invalid)}}var T=class e{#t=g(y);#e=g(h);#n=g(W);topic=v();saved=O();hide=O();partial=!1;topicForm=this.#n.group({title:["",[E.required]],description:["",[E.required]]});constructor(){F(()=>{this.topic()&&(this.topicForm.get("title").setValue(this.topic().title),this.topicForm.get("description").setValue(this.topic().description),this.partial=!0,console.log(this.partial))})}sendTopic(){let n=D(N({},this.topicForm.getRawValue()),{image:""});this.partial?this.#t.editTopic(n,this.topic().id).pipe(M(this.#e)).subscribe({next:()=>{this.saved.emit()},error:t=>console.log(t.error.message)}):this.#t.addTopic(n).pipe(M(this.#e)).subscribe({next:()=>{this.saved.emit()},error:t=>console.log(t.error.message)})}hideForm(){this.hide.emit()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["topics-form"]],inputs:{topic:[1,"topic"]},outputs:{saved:"saved",hide:"hide"},decls:3,vars:4,consts:[[1,"mt-4",3,"ngSubmit","formGroup","ngClass"],[1,"col-6"],["for","title",1,"form-label"],["type","text","name","title","formControlName","title",1,"form-control","input",3,"validationClasses"],["for","desc",1,"form-label"],["type","text","name","desc","formControlName","description",1,"form-control","input",3,"validationClasses"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-outlined-primary","m-2",3,"disabled"],["type","button",1,"btn","btn-outlined-danger","m-2",3,"click"],["type","text","name","title","formControlName","title",1,"form-control","form-control-sm","input",3,"validationClasses"],["type","submit",1,"btn","m-1",3,"disabled"],[1,"bi","bi-floppy"],["type","button",1,"btn","m-1",3,"click"],[1,"bi","bi-x"]],template:function(t,i){t&1&&(r(0,"form",0),m("ngSubmit",function(){return i.sendTopic()}),f(1,rt,13,5)(2,at,6,3),o()),t&2&&(d("formGroup",i.topicForm)("ngClass",w(3,ct)),l(),P(i.partial?2:1))},dependencies:[Z,J,X,Y,H,K,Q,tt,G],styles:[".input[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#0d0032cc,#000c);color:#d6a3d6}"]})};var it=e=>["/home/topics",e];function st(e,n){if(e&1){let t=C();r(0,"div",3)(1,"p-button",9),m("click",function(c){s(t);let S=A(3);return p(S.toggle(c))}),o(),r(2,"p-popover",null,0)(4,"div",10)(5,"button",11),m("click",function(){s(t);let c=a();return p(c.showEditForm())}),_(6,"i",12),o(),r(7,"button",11),m("click",function(){s(t);let c=a();return p(c.deleteTopic())}),_(8,"i",13),o()()()()}e&2&&(l(),d("rounded",!0))}function pt(e,n){if(e&1&&(r(0,"a",7)(1,"p",14),u(2),o()()),e&2){let t=a();d("routerLink",k(2,it,t.topic().id)),l(2),j(t.topic().title)}}function lt(e,n){if(e&1){let t=C();r(0,"topics-form",15),m("saved",function(){s(t);let c=a();return p(c.showEditForm())})("hide",function(){s(t);let c=a();return p(c.showEditForm())}),o()}if(e&2){let t=a();d("topic",t.topic())}}var V=class e{#t=g(y);#e=g(h);topic=v.required();actualUser=v.required();edit=x(!1);deleted=O();edited=O();showEditForm(){this.edited.emit(),this.edit.update(n=>!n)}deleteTopic(){this.#t.deleteTopic(this.topic().id).pipe(M(this.#e)).subscribe({next:()=>{this.deleted.emit()},error:n=>console.log(n.error.message)})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["topics-card"]],inputs:{topic:[1,"topic"],actualUser:[1,"actualUser"]},outputs:{deleted:"deleted",edited:"edited"},decls:8,vars:5,consts:[["op",""],[1,"topic"],[1,"topic-content"],[1,"settings"],[3,"routerLink"],["src","assets/normal/normal_galaxy_topic.png","alt","Icono topics",1,"card-img-top"],[1,"topic-body"],[1,"topic-title",3,"routerLink"],[3,"topic"],["icon","pi pi-cog","size","small","severity","help",3,"click","rounded"],[1,"flex","gap-6"],[1,"btn","btn-sm","m-1",3,"click"],[1,"bi","bi-pencil"],[1,"bi","bi-trash-fill"],[2,"font-size","x-large"],[3,"saved","hide","topic"]],template:function(t,i){t&1&&(r(0,"div",1)(1,"div",2),f(2,st,9,1,"div",3),r(3,"a",4),_(4,"img",5),o(),r(5,"div",6),f(6,pt,3,4,"a",7)(7,lt,1,1,"topics-form",8),o()()()),t&2&&(l(2),P(i.actualUser()&&i.actualUser().role==="ADMIN"&&!i.edit()?2:-1),l(),d("routerLink",k(3,it,i.topic().id)),l(3),P(i.edit()?7:6))},dependencies:[L,z,$,B,T],styles:['@keyframes _ngcontent-%COMP%_float{0%{transform:translatey(0)}50%{transform:translatey(-20px)}to{transform:translatey(0)}}.topic[_ngcontent-%COMP%]{background:none;border:0;transform:scale(.8);animation:_ngcontent-%COMP%_float 6s ease-in-out infinite}.topic[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#0d0032cc,#000c);border-radius:100px;padding:1rem;margin:.5rem;color:#b1b1b1;width:fit-content;height:fit-content;position:relative;overflow:hidden;transition:all .5s ease}.topic[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%]{position:absolute;left:40%;bottom:5%}.topic[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]   .topic-body[_ngcontent-%COMP%]{position:relative;bottom:1rem}.topic[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]   .topic-body[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}.topic[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]   .topic-body[_ngcontent-%COMP%]   .topic-title[_ngcontent-%COMP%]{color:#8c6e8c;text-decoration:none}.topic[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]   .topic-body[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{background-color:transparent;color:#d6a3d6}.topic[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]   .topic-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:20px}.topic[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(.7)}.topic[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(0deg,transparent,transparent 30%,rgba(214,163,214,.3));transform:rotate(-45deg);transition:all .5s ease;opacity:0}.topic[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]:hover{filter:brightness(1.75);transform:scale(1.05);box-shadow:0 0 20px #d6a3d680}.topic[_ngcontent-%COMP%]   .topic-content[_ngcontent-%COMP%]:hover:before{opacity:1;transform:rotate(-45deg) translateY(100%)}']})};var dt=(e,n)=>n.id;function mt(e,n){if(e&1){let t=C();r(0,"div",4)(1,"topics-form",6),m("saved",function(){s(t);let c=a(2);return p(c.showTopicsForm())})("hide",function(){s(t);let c=a(2);return p(c.showTopicsForm())}),o()()}}function _t(e,n){if(e&1){let t=C();r(0,"button",7),m("click",function(){s(t);let c=a(2);return p(c.showTopicsForm())}),_(1,"img",8),u(2," Agregar galaxia "),o()}}function gt(e,n){if(e&1&&(r(0,"div",0)(1,"h2",3),u(2,"Panel de mando"),o(),f(3,mt,2,0,"div",4)(4,_t,3,0,"button",5),o()),e&2){let t=a();l(3),P(t.showForm()?3:4)}}function ut(e,n){if(e&1){let t=C();r(0,"topics-card",9),m("deleted",function(){let c=s(t).$implicit,S=a();return p(S.deleteTopic(c))})("edited",function(){s(t);let c=a();return p(c.getTopics())}),o()}if(e&2){let t=n.$implicit,i=a();d("topic",t)("actualUser",i.actualUser())}}function Ct(e,n){e&1&&(r(0,"p"),u(1,"Sin datos"),o())}var ot=class e{#t=g(y);#e=g(h);#n=g(q);actualUser=x(void 0);topics=x([]);showForm=x(!1);constructor(){this.getTopics(),F(()=>{this.actualUser.set(this.#n.currentUser.value()),console.log("USER: ",this.actualUser())})}showTopicsForm(){this.showForm()&&this.getTopics(),this.showForm.update(n=>!n)}getTopics(){this.#t.getTopics().pipe(M(this.#e)).subscribe({next:n=>{this.topics.set(n)},error:n=>{console.log(n.error.message)}})}deleteTopic(n){this.topics.update(t=>t.filter(i=>i!==n))}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["topics-page"]],decls:5,vars:2,consts:[[1,"fondo-card"],[1,"group","fondo-card"],[1,"topic-card",3,"topic","actualUser"],[2,"font-size","large"],[1,"col-12"],[1,"btn","btn-outline-info"],[3,"saved","hide"],[1,"btn","btn-outline-info",3,"click"],["src","assets/normal/normal_galaxy_topic.png","alt","Icono topics","width","25px;"],[1,"topic-card",3,"deleted","edited","topic","actualUser"]],template:function(t,i){t&1&&(f(0,gt,5,1,"div",0),r(1,"div",1),R(2,ut,1,2,"topics-card",2,dt,!1,Ct,2,0,"p"),o()),t&2&&(P(i.actualUser()&&i.actualUser().role==="ADMIN"?0:-1),l(2),I(i.topics()))},dependencies:[V,T],styles:['.fondo-card[_ngcontent-%COMP%]{border-radius:20px;padding:1.5rem;margin-bottom:1rem;opacity:.9;box-shadow:0 0 40px #00000080;border:2px solid rgba(13,0,50,.5);background:linear-gradient(to bottom,#0d0032cc,#000c);color:#fff}@media (min-width: 1500px){.principal[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr)}.principal[_ngcontent-%COMP%]   .home[_ngcontent-%COMP%]{grid-column:1/3}}@media (max-width: 1500px){.principal[_ngcontent-%COMP%]{display:flex;flex-direction:column}}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}@media (max-width: 1500px) and (min-width: 1300px){.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;text-align:left}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]{position:relative}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#c7b6c5;text-decoration:none}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:2px;background:linear-gradient(to left,#1c1635,#ab9ce0);bottom:0;left:0;transform:scaleX(0);transform-origin:left;transition:transform .4s ease-out}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]:hover:after{transform:scaleX(1)}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]   .post-aside[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.principal[_ngcontent-%COMP%]   .info-aside[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-left:.2rem}@keyframes _ngcontent-%COMP%_float{0%{transform:translatey(0)}50%{transform:translatey(-20px)}to{transform:translatey(0)}}.group[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));grid-column-gap:10px;grid-row-gap:10px}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(1){animation:_ngcontent-%COMP%_float 15s ease-in-out infinite;animation-delay:9s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(2){animation:_ngcontent-%COMP%_float 15s ease-in-out infinite;animation-delay:5s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(3){animation:_ngcontent-%COMP%_float 20s ease-in-out infinite;animation-delay:3s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(4){animation:_ngcontent-%COMP%_float 5s ease-in-out infinite;animation-delay:9s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(5){animation:_ngcontent-%COMP%_float 10s ease-in-out infinite;animation-delay:6s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(6){animation:_ngcontent-%COMP%_float 10s ease-in-out infinite;animation-delay:6s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(7){animation:_ngcontent-%COMP%_float 20s ease-in-out infinite;animation-delay:5s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(8){animation:_ngcontent-%COMP%_float 10s ease-in-out infinite;animation-delay:7s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(9){animation:_ngcontent-%COMP%_float 25s ease-in-out infinite;animation-delay:8s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(10){animation:_ngcontent-%COMP%_float 10s ease-in-out infinite;animation-delay:5s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(11){animation:_ngcontent-%COMP%_float 15s ease-in-out infinite;animation-delay:3s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(12){animation:_ngcontent-%COMP%_float 5s ease-in-out infinite;animation-delay:9s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(13){animation:_ngcontent-%COMP%_float 15s ease-in-out infinite;animation-delay:7s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(14){animation:_ngcontent-%COMP%_float 20s ease-in-out infinite;animation-delay:6s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(15){animation:_ngcontent-%COMP%_float 15s ease-in-out infinite;animation-delay:6s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(16){animation:_ngcontent-%COMP%_float 10s ease-in-out infinite;animation-delay:4s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(17){animation:_ngcontent-%COMP%_float 20s ease-in-out infinite;animation-delay:5s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(18){animation:_ngcontent-%COMP%_float 20s ease-in-out infinite;animation-delay:2s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(19){animation:_ngcontent-%COMP%_float 20s ease-in-out infinite;animation-delay:8s}.group[_ngcontent-%COMP%]   .topic-card[_ngcontent-%COMP%]:nth-child(20){animation:_ngcontent-%COMP%_float 10s ease-in-out infinite;animation-delay:2s}']})};export{ot as TopicsPageComponent};
